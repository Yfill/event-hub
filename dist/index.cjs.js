/*! @yfill/event-hub v1.0.3 | Sun, 10 Jan 2021 11:37:34 GMT | https://yfill.cn/event-hub */
"use strict";function t(t,n){for(var r=0;r<n.length;r++){var e=n[r];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(t,e.key,e)}}function n(t){return function(t){if(Array.isArray(t))return r(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,n){if(!t)return;if("string"==typeof t)return r(t,n);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return r(t,n)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,n){(null==n||n>t.length)&&(n=t.length);for(var r=0,e=new Array(n);r<n;r++)e[r]=t[r];return e}var e,o=function(t){var n=[];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&n.push(t[r]);return n};!function(t){t.Creating="Creating",t.Activated="Activated",t.Destroyed="Destroyed"}(e||(e={}));var i=0,a=0,u={},c={},f=function(){return"".concat(i+=1)},s=function(t,n){return t["$event-type-".concat(n)]||""},l=function(t,n,r){t["$event-type-".concat(n)]=r},y=function(t,n,r){var e=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(n&&r){var o=t[n]||{},i=s(r,n)||f(),a=o[i]||[[],[]];e?a[1].push(r):a[0].push(r),o[i]=a,t[n]=o,l(r,n,i)}},h=function(t,n,r){r?delete(t[n]||{})["".concat(s(r,n))]:delete t[n]},v=function(t,r){for(var e=arguments.length,i=new Array(e>2?e-2:0),a=2;a<e;a++)i[a-2]=arguments[a];o(t[r]||{}).forEach((function(t){[].concat(n(t[0]),n(t[1])).forEach((function(t){return t.apply(void 0,i)})),t[1]=[]}))},d=function(t,n){t===e.Activated&&n()},p=function(){function n(){!function(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}(this,n),this.status=e.Creating,this.id="".concat(a+=1),c[this.id]={},this.status=e.Activated}var r,o,i;return r=n,i=[{key:"create",value:function(){return new n}}],(o=[{key:"on",value:function(t,n){var r=this;return d(this.status,(function(){return y(c[r.id],t,n)})),this}},{key:"once",value:function(t,n){var r=this;return d(this.status,(function(){return y(c[r.id],t,n,!0)})),this}},{key:"off",value:function(t,n){var r=this;return d(this.status,(function(){return h(c[r.id],t,n)})),this}},{key:"emit",value:function(t){for(var n=this,r=arguments.length,e=new Array(r>1?r-1:0),o=1;o<r;o++)e[o-1]=arguments[o];return d(this.status,(function(){return v.apply(void 0,[c[n.id],t].concat(e))})),this}},{key:"destroy",value:function(){delete c[this.id],this.status=e.Destroyed}}])&&t(r.prototype,o),i&&t(r,i),n}();p.on=function(t,n){return y(u,t,n)},p.once=function(t,n){return y(u,t,n,!0)},p.off=function(t,n){return h(u,t,n)},p.emit=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),e=1;e<n;e++)r[e-1]=arguments[e];return v.apply(void 0,[u,t].concat(r))},module.exports=p;
